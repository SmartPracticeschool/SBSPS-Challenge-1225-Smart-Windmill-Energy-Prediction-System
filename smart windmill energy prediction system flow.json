[{"id":"4e14cc76.6469c4","type":"function","z":"4d7532f9.91328c","name":"store wind speed,temp, pressure in array","func":"var swept_area_i = global.get('swept_area_i');\nvar blade_length_i = global.get('blade_length_i');\nvar power_coef_i = global.get('power_coef_i');\nvar WindSpeed = [];\nvar AirDensity = [];\nvar power = [];\nvar Rd = 287.058;\nvar Rv = 461.495;\nvar P1,Pv,Pd;\nvar i =0;\nvar j =0;\nwhile (i<48){\n    P1= 6.1078 * Math.pow(10,(7.5*(msg.payload.hourly[i].temp-273.15)/(msg.payload.hourly[i].temp-35.85)));\n    Pv= P1*msg.payload.hourly[i].humidity;\n    Pd = (msg.payload.hourly[i].pressure*100)- Pv;\n    \n    WindSpeed.push(msg.payload.hourly[i].wind_speed);\n    AirDensity.push((Pd/(Rd*msg.payload.hourly[i].temp))+(Pv/(Rv*msg.payload.hourly[i].temp)));\n    i++;\n}\n\nif(swept_area_i === null){\n    swept_area_i= 1;\n}\nif (blade_length_i === null){\n    blade_length_i =1;\n}\nif (power_coef_i === null){\n    power_coef_i = 0.59;\n}\n// Calculation of power that can be generated in next 48 hours\nwhile (j<48){\n    power.push(0.5*AirDensity[j]*swept_area_i*Math.pow(WindSpeed[j],3)*power_coef_i);\n    j++;\n}\n\n\nmsg.wind = WindSpeed;\nmsg.density = AirDensity;\nmsg.swept = swept_area_i;\nmsg.blade = blade_length_i;\nmsg.power = power_coef_i;\nmsg.payload = power;\nreturn msg;","outputs":1,"noerr":0,"x":1000,"y":160,"wires":[["ddc7def0.3ef35","ffff5e3f.92823"]]}]